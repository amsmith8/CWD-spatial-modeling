# # remove N/A'
# train <- na.omit( train )
# test <- na.omit( test )
Bt <- rbind( At , Av )
train_pts <- Bt[ , 1:2 ]
# extract values
train_covariates <- extract( environmental_data , train_pts)
train <- data.frame( cbind( Bt[ , 3 ]  , train_covariates ) )
colnames(train)[1] = "Presence"
train <- na.omit( train ) # remove N/A's
test_pts <- T_data[ , 1:2 ]
# extract values
test_covariates <- extract( environmental_data , test_pts )
test <- data.frame( cbind( T_data[ , 3 ] , test_covariates ) )
colnames(test)[1] = "Presence"
test <- na.omit( test ) # remove N/A's
# Create data.frame to hold model statistics
model_stats <- data.frame( matrix( NA , nrow = 3 , ncol= 3 ) )
model_stats[,3] <- species_type
row.names(model_stats) <- c( "gbm" , "maxent" , "rf")
colnames(model_stats) <- c( "auc" , "threshold", "species" )
#---------------------------------------------------------------------------------------------
### STEP 3: MODELING!
#---------------------------------------------------------------------------------------------
set.seed(323)
#__________________________
# GBM
#__________________________
tic("gbm")
gbm <- gbm( Presence ~ ., data = train , n.trees = 100 )
# evaluate
eval_gbm <-  evaluate( p = test[test$Presence == 1,], test[test$Presence == 0,], gbm, n.trees = 100 )
model_stats[1,1] <- eval_gbm@auc
model_stats[1,2] <- threshold(eval_gbm, stat ='spec_sens')
# pred_gbm <- predict( environmental_data, gbm , n.trees = 100 )
# model_stack_gbm <- stack( model_stack_gbm, pred_gbm ) # add rasters
toc()
#__________________________
# MaxEnt
#__________________________
tic("maxent")
train_occ <- subset(train, Presence == 1)
train_bg <- subset(train, Presence == 0)
maxent <- maxent( x = environmental_data , p = train_occ[1:2], a = train_bg[1:2] ) # background,  regression
test_occ <- subset(test, Presence == 1)
test_bg <- subset(test, Presence == 0)
# Evaluate
eval_maxent <-  evaluate( p = test_occ[1:2], a <-test_bg[1:2], maxent, x = environmental_data )
model_stats[2,1] <- eval_maxent@auc
model_stats[2,2] <- threshold(eval_maxent, stat ='spec_sens')
# pred_maxent<- predict( environmental_data , maxent )
# model_stack_maxent <- stack( model_stack_maxent , pred_maxent ) # add rasters
toc()
#__________________________
# RF
#__________________________
tic("rf")
rf <- randomForest( Presence ~ .,  data = train )
# Evaluate
eval_rf <-  evaluate( p = test[test$Presence == 1,] , test[test$Presence == 0,], rf )
model_stats[3,1] <- eval_rf@auc
model_stats[3,2] <- threshold(eval_rf, stat ='spec_sens')
# pred_rf <- predict( environmental_data , rf )
toc()
#---------------------------------------------------------------------------------------------
### STEP 4:  SAVE RESULTS
#---------------------------------------------------------------------------------------------
#print results
model_stats
# save results
save.image ( file = paste( "static_model_balanced_" , species_type , ".RData" , sep = "" ) )
saveRDS(model_stats, paste( "static_model_balanced_results_" , species_type , ".rds" , sep = "" )  )
#writeRaster( pred_gbm , filename= paste( "static_model_balanced_" , species_type , "_gbm" , sep = "" ), format = "GTiff" )
#writeRaster( pred_maxent , filename= paste( "static_model_balanced_" , species_type , "_maxent" , sep = "" ) , format = "GTiff" )
#writeRaster( pred_rf , filename= paste( "static_model_balanced_" , species_type , "_rf" , sep = "" ) , format = "GTiff" )
#  (Balanced) Static model for Kudzu data
#---------------------------------------------------------------------------------------------
### STEP 1: SET UP ENVIRONMENT
#---------------------------------------------------------------------------------------------
# Run the following BEFORE uploading any packages (ie RJava).  This will avoid the "ava.lang.OutOfMemoryError: Java heap space" error.
Sys.setenv(NOAWT=TRUE)
options(java.parameters = "-Xmx4g" ) # Tells the machine to allow this many Gigs for Java
# Uploaded packages
#__________________________
library(caret)
library(dismo)
library(gbm)
library(randomForest)
library(rJava)
library(raster)
library(tictoc)
# Upload functions
#__________________________
source("./R/Functions.R")
# Species for model
#__________________________
species_type <- "Kudzu"
#---------------------------------------------------------------------------------------------
### STEP 2: DATA PREP
# import  species data
At <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_At_Y.csv" , sep = "" ) )
Av <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_Av_Y.csv" , sep = "" ) )
#Bv <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_Bv_Y.csv" , sep = "" ) )
T_data <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_T_Y.csv" , sep = "" ) )
# Add environmental data for MaxEnt and if creating prediction plots
alt <- raster( "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif" )
environmental_data <- stack( list_to_stack( list.files( path = "/Users/amsmith/Documents/WC2_for_deep_learning/wc2",full.names= TRUE, pattern = ".tif") ), alt ) # adds 'alt' to bioclim stack
# # Import data
# train_y <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_balanced_training_Y.csv" , sep = "" ) )
# test_y <-  read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_balanced_testing_Y.csv" , sep = "" ) )
# train_covar <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_static_model_balanced_training_covariates.csv" , sep = "" ) )
# test_covar <-  read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_static_model_balanced_testing_covariates.csv" , sep = "" ) )
#
# # data for models
# train <- cbind( train_y , train_covar  )
# test <- cbind( test_y , test_covar  )
#
# # removes Absence column - not needed for static
# train <- train[ , -4 ]
# test <- test[ , -4 ]
#
# # remove N/A'
# train <- na.omit( train )
# test <- na.omit( test )
Bt <- rbind( At , Av )
train_pts <- Bt[ , 1:2 ]
# extract values
train_covariates <- extract( environmental_data , train_pts)
train <- data.frame( cbind( Bt[ , 3 ]  , train_covariates ) )
colnames(train)[1] = "Presence"
train <- na.omit( train ) # remove N/A's
test_pts <- T_data[ , 1:2 ]
# extract values
test_covariates <- extract( environmental_data , test_pts )
test <- data.frame( cbind( T_data[ , 3 ] , test_covariates ) )
colnames(test)[1] = "Presence"
test <- na.omit( test ) # remove N/A's
# Create data.frame to hold model statistics
model_stats <- data.frame( matrix( NA , nrow = 3 , ncol= 3 ) )
model_stats[,3] <- species_type
row.names(model_stats) <- c( "gbm" , "maxent" , "rf")
colnames(model_stats) <- c( "auc" , "threshold", "species" )
#---------------------------------------------------------------------------------------------
### STEP 3: MODELING!
#---------------------------------------------------------------------------------------------
set.seed(323)
#__________________________
# GBM
#__________________________
tic("gbm")
gbm <- gbm( Presence ~ ., data = train , n.trees = 100 )
# evaluate
eval_gbm <-  evaluate( p = test[test$Presence == 1,], test[test$Presence == 0,], gbm, n.trees = 100 )
model_stats[1,1] <- eval_gbm@auc
model_stats[1,2] <- threshold(eval_gbm, stat ='spec_sens')
# pred_gbm <- predict( environmental_data, gbm , n.trees = 100 )
# model_stack_gbm <- stack( model_stack_gbm, pred_gbm ) # add rasters
toc()
#__________________________
# MaxEnt
#__________________________
tic("maxent")
train_occ <- subset(train, Presence == 1)
train_bg <- subset(train, Presence == 0)
maxent <- maxent( x = environmental_data , p = train_occ[1:2], a = train_bg[1:2] ) # background,  regression
test_occ <- subset(test, Presence == 1)
test_bg <- subset(test, Presence == 0)
# Evaluate
eval_maxent <-  evaluate( p = test_occ[1:2], a <-test_bg[1:2], maxent, x = environmental_data )
model_stats[2,1] <- eval_maxent@auc
model_stats[2,2] <- threshold(eval_maxent, stat ='spec_sens')
# pred_maxent<- predict( environmental_data , maxent )
# model_stack_maxent <- stack( model_stack_maxent , pred_maxent ) # add rasters
toc()
#__________________________
# RF
#__________________________
tic("rf")
rf <- randomForest( Presence ~ .,  data = train )
# Evaluate
eval_rf <-  evaluate( p = test[test$Presence == 1,] , test[test$Presence == 0,], rf )
model_stats[3,1] <- eval_rf@auc
model_stats[3,2] <- threshold(eval_rf, stat ='spec_sens')
# pred_rf <- predict( environmental_data , rf )
toc()
#---------------------------------------------------------------------------------------------
### STEP 4:  SAVE RESULTS
#---------------------------------------------------------------------------------------------
#print results
model_stats
# save results
save.image ( file = paste( "static_model_balanced_" , species_type , ".RData" , sep = "" ) )
saveRDS(model_stats, paste( "static_model_balanced_results_" , species_type , ".rds" , sep = "" )  )
#writeRaster( pred_gbm , filename= paste( "static_model_balanced_" , species_type , "_gbm" , sep = "" ), format = "GTiff" )
#writeRaster( pred_maxent , filename= paste( "static_model_balanced_" , species_type , "_maxent" , sep = "" ) , format = "GTiff" )
#writeRaster( pred_rf , filename= paste( "static_model_balanced_" , species_type , "_rf" , sep = "" ) , format = "GTiff" )
#  (Balanced) Static model for Ladybird data
#---------------------------------------------------------------------------------------------
### STEP 1: SET UP ENVIRONMENT
#---------------------------------------------------------------------------------------------
# Run the following BEFORE uploading any packages (ie RJava).  This will avoid the "ava.lang.OutOfMemoryError: Java heap space" error.
Sys.setenv(NOAWT=TRUE)
options(java.parameters = "-Xmx4g" ) # Tells the machine to allow this many Gigs for Java
# Uploaded packages
#__________________________
library(caret)
library(dismo)
library(gbm)
library(randomForest)
library(rJava)
library(raster)
library(tictoc)
# Upload functions
#__________________________
source("./R/Functions.R")
# Species for model
#__________________________
species_type <- "Ladybird"
#---------------------------------------------------------------------------------------------
### STEP 2: DATA PREP
# import  species data
At <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_At_Y.csv" , sep = "" ) )
Av <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_Av_Y.csv" , sep = "" ) )
#Bv <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_Bv_Y.csv" , sep = "" ) )
T_data <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_T_Y.csv" , sep = "" ) )
# Add environmental data for MaxEnt and if creating prediction plots
alt <- raster( "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif" )
environmental_data <- stack( list_to_stack( list.files( path = "/Users/amsmith/Documents/WC2_for_deep_learning/wc2",full.names= TRUE, pattern = ".tif") ), alt ) # adds 'alt' to bioclim stack
# # Import data
# train_y <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_balanced_training_Y.csv" , sep = "" ) )
# test_y <-  read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_balanced_testing_Y.csv" , sep = "" ) )
# train_covar <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_static_model_balanced_training_covariates.csv" , sep = "" ) )
# test_covar <-  read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_static_model_balanced_testing_covariates.csv" , sep = "" ) )
#
# # data for models
# train <- cbind( train_y , train_covar  )
# test <- cbind( test_y , test_covar  )
#
# # removes Absence column - not needed for static
# train <- train[ , -4 ]
# test <- test[ , -4 ]
#
# # remove N/A'
# train <- na.omit( train )
# test <- na.omit( test )
Bt <- rbind( At , Av )
train_pts <- Bt[ , 1:2 ]
# extract values
train_covariates <- extract( environmental_data , train_pts)
train <- data.frame( cbind( Bt[ , 3 ]  , train_covariates ) )
colnames(train)[1] = "Presence"
train <- na.omit( train ) # remove N/A's
test_pts <- T_data[ , 1:2 ]
# extract values
test_covariates <- extract( environmental_data , test_pts )
test <- data.frame( cbind( T_data[ , 3 ] , test_covariates ) )
colnames(test)[1] = "Presence"
test <- na.omit( test ) # remove N/A's
# Create data.frame to hold model statistics
model_stats <- data.frame( matrix( NA , nrow = 3 , ncol= 3 ) )
model_stats[,3] <- species_type
row.names(model_stats) <- c( "gbm" , "maxent" , "rf")
colnames(model_stats) <- c( "auc" , "threshold", "species" )
#---------------------------------------------------------------------------------------------
### STEP 3: MODELING!
#---------------------------------------------------------------------------------------------
set.seed(323)
#__________________________
# GBM
#__________________________
tic("gbm")
gbm <- gbm( Presence ~ ., data = train , n.trees = 100 )
# evaluate
eval_gbm <-  evaluate( p = test[test$Presence == 1,], test[test$Presence == 0,], gbm, n.trees = 100 )
model_stats[1,1] <- eval_gbm@auc
model_stats[1,2] <- threshold(eval_gbm, stat ='spec_sens')
# pred_gbm <- predict( environmental_data, gbm , n.trees = 100 )
# model_stack_gbm <- stack( model_stack_gbm, pred_gbm ) # add rasters
toc()
#__________________________
# MaxEnt
#__________________________
tic("maxent")
train_occ <- subset(train, Presence == 1)
train_bg <- subset(train, Presence == 0)
maxent <- maxent( x = environmental_data , p = train_occ[1:2], a = train_bg[1:2] ) # background,  regression
test_occ <- subset(test, Presence == 1)
test_bg <- subset(test, Presence == 0)
# Evaluate
eval_maxent <-  evaluate( p = test_occ[1:2], a <-test_bg[1:2], maxent, x = environmental_data )
model_stats[2,1] <- eval_maxent@auc
model_stats[2,2] <- threshold(eval_maxent, stat ='spec_sens')
# pred_maxent<- predict( environmental_data , maxent )
# model_stack_maxent <- stack( model_stack_maxent , pred_maxent ) # add rasters
toc()
#__________________________
# RF
#__________________________
tic("rf")
rf <- randomForest( Presence ~ .,  data = train )
# Evaluate
eval_rf <-  evaluate( p = test[test$Presence == 1,] , test[test$Presence == 0,], rf )
model_stats[3,1] <- eval_rf@auc
model_stats[3,2] <- threshold(eval_rf, stat ='spec_sens')
# pred_rf <- predict( environmental_data , rf )
toc()
#---------------------------------------------------------------------------------------------
### STEP 4:  SAVE RESULTS
#---------------------------------------------------------------------------------------------
#print results
model_stats
# save results
save.image ( file = paste( "static_model_balanced_" , species_type , ".RData" , sep = "" ) )
saveRDS(model_stats, paste( "static_model_balanced_results_" , species_type , ".rds" , sep = "" )  )
#writeRaster( pred_gbm , filename= paste( "static_model_balanced_" , species_type , "_gbm" , sep = "" ), format = "GTiff" )
#writeRaster( pred_maxent , filename= paste( "static_model_balanced_" , species_type , "_maxent" , sep = "" ) , format = "GTiff" )
#writeRaster( pred_rf , filename= paste( "static_model_balanced_" , species_type , "_rf" , sep = "" ) , format = "GTiff" )
#  (Balanced) Static model for Parakeet data
#---------------------------------------------------------------------------------------------
### STEP 1: SET UP ENVIRONMENT
#---------------------------------------------------------------------------------------------
# Run the following BEFORE uploading any packages (ie RJava).  This will avoid the "ava.lang.OutOfMemoryError: Java heap space" error.
Sys.setenv(NOAWT=TRUE)
options(java.parameters = "-Xmx4g" ) # Tells the machine to allow this many Gigs for Java
# Uploaded packages
#__________________________
library(caret)
library(dismo)
library(gbm)
library(randomForest)
library(rJava)
library(raster)
library(tictoc)
# Upload functions
#__________________________
source("./R/Functions.R")
# Species for model
#__________________________
species_type <- "Parakeet"
#---------------------------------------------------------------------------------------------
### STEP 2: DATA PREP
# import  species data
At <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_At_Y.csv" , sep = "" ) )
Av <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_Av_Y.csv" , sep = "" ) )
#Bv <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_Bv_Y.csv" , sep = "" ) )
T_data <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_T_Y.csv" , sep = "" ) )
# Add environmental data for MaxEnt and if creating prediction plots
alt <- raster( "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif" )
environmental_data <- stack( list_to_stack( list.files( path = "/Users/amsmith/Documents/WC2_for_deep_learning/wc2",full.names= TRUE, pattern = ".tif") ), alt ) # adds 'alt' to bioclim stack
# # Import data
# train_y <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_balanced_training_Y.csv" , sep = "" ) )
# test_y <-  read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_balanced_testing_Y.csv" , sep = "" ) )
# train_covar <- read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_static_model_balanced_training_covariates.csv" , sep = "" ) )
# test_covar <-  read.csv( paste( "./Data/Data_static_model_balanced/" , species_type , "_static_model_balanced_testing_covariates.csv" , sep = "" ) )
#
# # data for models
# train <- cbind( train_y , train_covar  )
# test <- cbind( test_y , test_covar  )
#
# # removes Absence column - not needed for static
# train <- train[ , -4 ]
# test <- test[ , -4 ]
#
# # remove N/A'
# train <- na.omit( train )
# test <- na.omit( test )
Bt <- rbind( At , Av )
train_pts <- Bt[ , 1:2 ]
# extract values
train_covariates <- extract( environmental_data , train_pts)
train <- data.frame( cbind( Bt[ , 3 ]  , train_covariates ) )
colnames(train)[1] = "Presence"
train <- na.omit( train ) # remove N/A's
test_pts <- T_data[ , 1:2 ]
# extract values
test_covariates <- extract( environmental_data , test_pts )
test <- data.frame( cbind( T_data[ , 3 ] , test_covariates ) )
colnames(test)[1] = "Presence"
test <- na.omit( test ) # remove N/A's
# Create data.frame to hold model statistics
model_stats <- data.frame( matrix( NA , nrow = 3 , ncol= 3 ) )
model_stats[,3] <- species_type
row.names(model_stats) <- c( "gbm" , "maxent" , "rf")
colnames(model_stats) <- c( "auc" , "threshold", "species" )
#---------------------------------------------------------------------------------------------
### STEP 3: MODELING!
#---------------------------------------------------------------------------------------------
set.seed(323)
#__________________________
# GBM
#__________________________
tic("gbm")
gbm <- gbm( Presence ~ ., data = train , n.trees = 100 )
# evaluate
eval_gbm <-  evaluate( p = test[test$Presence == 1,], test[test$Presence == 0,], gbm, n.trees = 100 )
model_stats[1,1] <- eval_gbm@auc
model_stats[1,2] <- threshold(eval_gbm, stat ='spec_sens')
# pred_gbm <- predict( environmental_data, gbm , n.trees = 100 )
# model_stack_gbm <- stack( model_stack_gbm, pred_gbm ) # add rasters
toc()
#__________________________
# MaxEnt
#__________________________
tic("maxent")
train_occ <- subset(train, Presence == 1)
train_bg <- subset(train, Presence == 0)
maxent <- maxent( x = environmental_data , p = train_occ[1:2], a = train_bg[1:2] ) # background,  regression
test_occ <- subset(test, Presence == 1)
test_bg <- subset(test, Presence == 0)
# Evaluate
eval_maxent <-  evaluate( p = test_occ[1:2], a <-test_bg[1:2], maxent, x = environmental_data )
model_stats[2,1] <- eval_maxent@auc
model_stats[2,2] <- threshold(eval_maxent, stat ='spec_sens')
# pred_maxent<- predict( environmental_data , maxent )
# model_stack_maxent <- stack( model_stack_maxent , pred_maxent ) # add rasters
toc()
#__________________________
# RF
#__________________________
tic("rf")
rf <- randomForest( Presence ~ .,  data = train )
# Evaluate
eval_rf <-  evaluate( p = test[test$Presence == 1,] , test[test$Presence == 0,], rf )
model_stats[3,1] <- eval_rf@auc
model_stats[3,2] <- threshold(eval_rf, stat ='spec_sens')
# pred_rf <- predict( environmental_data , rf )
toc()
#---------------------------------------------------------------------------------------------
### STEP 4:  SAVE RESULTS
#---------------------------------------------------------------------------------------------
#print results
model_stats
# save results
save.image ( file = paste( "static_model_balanced_" , species_type , ".RData" , sep = "" ) )
saveRDS(model_stats, paste( "static_model_balanced_results_" , species_type , ".rds" , sep = "" )  )
#writeRaster( pred_gbm , filename= paste( "static_model_balanced_" , species_type , "_gbm" , sep = "" ), format = "GTiff" )
#writeRaster( pred_maxent , filename= paste( "static_model_balanced_" , species_type , "_maxent" , sep = "" ) , format = "GTiff" )
#writeRaster( pred_rf , filename= paste( "static_model_balanced_" , species_type , "_rf" , sep = "" ) , format = "GTiff" )
setwd("~/Documents/GitHub/Time-series-sdms")
library("dismo")
library("raster")
alt <- raster( "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif" )
plot(alt)
plot(alt, ylim = c(-60,60) )
prec_1970s <- list.files( path = "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_prec_1970-1979" , full.names= TRUE , pattern = ".tif" )
prec_1970s
alt2 <- raster( "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif" )
alt3 <- raster( "/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif" )
stack_a <- raster::stack(alt1, alt2, alt3)
stack_a <-stack(alt1, alt2, alt3)
stack_a <-stack(alt1, alt2)
stack_a <-stack(alt, alt2, alt3)
stack_a
names(stack) <- c("a", "b", "c")
names(stack_a) <- c("a", "b", "c")
stack_a$b
setwd("~/Documents/GitHub/CWD-spatial-modeling")
# Collect necessary data from interwebs
climate <- getData('worldclim', var='bio', res=2.5)
# Create list to call files to make raster stacks
topo_list <- list.files(path = "./Raster_files", full.names= TRUE, pattern = ".tif")
bioclim_list <- list.files(path = "./Users/amsmith/Documents/WC2_for_deep_learning/wc2",full.names= TRUE, pattern = ".tif")
bioclim_list <- list.files(path = "/Users/amsmith/Documents/WC2_for_deep_learning/wc2",full.names= TRUE, pattern = ".tif")
library("dismo")
library("raster")
library("rgdal")
library("tictoc")
# Elevation data
elevation <- raster("wc2.1_2.5m_elev.tif")
elevation <- raster("/Users/amsmith/Documents/WC2_for_deep_learning/wc2.1_2.5m_elev.tif")
bioclim_list <- list.files(path = "/Users/amsmith/Documents/WC2_for_deep_learning/wc2",full.names= TRUE, pattern = ".tif")
bioclim_list
# Function 1 - creates stack from list of files
list_to_stack <- function(tiff.list){
model.stack <- stack()
for (i in 1:length(tiff.list)){
r <- raster(tiff.list[i])
model.stack <- stack(model.stack, r)}
model.stack
}
bioclim_stack <- list_to_stack(bioclim_list)
bioclim_stack
names(bioclim_stack) <- c( "bio1" , "bio10" , "bio11" , "bio12" , "bio13" , "bio14" , "bio15" , "bio16" , "bio17" , "bio18" ,
"bio19" , "bio2" , "bio3" , "bio4" , "bio5" , "bio6 ", "bio7" , "bio8" , "bio9"  )
bioclim_stack
bioclim_stack$bio11
states <- rgdal::readOGR( "/Users/austinsmith/Downloads/ne_110m_admin_1_states_provinces/ne_110m_admin_1_states_provinces.shp" )
library("rgdal")
states <- rgdal::readOGR( "/Users/austinsmith/Downloads/ne_110m_admin_1_states_provinces/ne_110m_admin_1_states_provinces.shp" )
states <- rgdal::readOGR( "/Users/austinsmith/Downloads/gadm36.shp" )
states <- rgdal::readOGR( "~/Users/austinsmith/Downloads/gadm36.shp" )
states <- shapefile( "/Users/austinsmith/Downloads/gadm36.shp" )
states <- shapefile("/Users/austinsmith/Downloads/gadm36.shp")
states <- shapefile("/Users/amsmith/Downloads/gadm36_shp/gadm36.shp ")
states <- shapefile("/Users/amsmith/Downloads/ne_110m_admin_1_states_provinces/ne_110m_admin_1_states_provinces.shp")
plot(states)
library("dplyr")
states
contiguous_us <- states[states$name != "Alaska",]  # remove Alaska
contiguous_us  <- contiguous_us [contiguous_us $name != "Hawaii",]
states
contiguous_us
plot(contiguous_us)
library(sf)
A <- mask(contiguous_us ,
bioclim_stack )
A <- mask(bioclim_stack, contiguous_us )
aaa <- states[states$name == "Alaska",]
A <- mask(bioclim_stack, aaa )
A <- mask(bioclim_stack$bio1, aaa )
plot(A)
bioclim_stack$bio1
